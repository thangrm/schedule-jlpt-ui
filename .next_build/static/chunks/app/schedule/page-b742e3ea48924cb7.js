(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{7493:function(e,n,t){Promise.resolve().then(t.bind(t,5037))},5037:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return F}});var a=t(7437),l=t(2265),i=t(4236),o=t(4623),s=t(4722),r=t(2586),d=t(2067),u=t(5204);t(2416);var c=t(2737),m=t.n(c),h=t(1395),p=t(9619),g=t(2250),f=t(6682),v=t(2943),x=t(5668),j=t(1480),y=t(6287),_=t(1943),Z=t(797),b=t(2649);function k(e){var n;let{form:t,date:o,lesson:s,open:d,type:u,handleOk:c,handleCancel:m,callBackOnSuccess:p}=e,g=null!==(n=b.Z.get("token"))&&void 0!==n?n:"",[f,v]=(0,l.useState)(!1);return(0,a.jsx)(r.ZP,{theme:{components:{Modal:{colorBgMask:"rgba(0, 0, 0, 0)"}}},children:(0,a.jsx)(h.Z,{title:u===_.Rh.GRAMMAR?"Grammar note":"Vocabulary note",open:d,onOk:c,confirmLoading:f,onCancel:m,okText:"Save",children:(0,a.jsx)(i.Z,{form:t,style:{maxWidth:600,minHeight:325},autoComplete:"off",onFinish:e=>{v(!0);let n={[u===_.Rh.GRAMMAR?"grammar_note":"vocabulary_note"]:null==e?void 0:e.note};u===_.Rh.GRAMMAR&&(n={...n,grammar_checked:!0}),fetch(_.QP+"schedules",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+g,Accept:"application/json"},body:JSON.stringify({is_update:!0,date:null==o?void 0:o.format("YYYY-MM-DD"),...n})}).then(n=>{v(!1),n.ok&&p(),s[u===_.Rh.GRAMMAR?"grammar_note":"vocabulary_note"]=null==e?void 0:e.note,u===_.Rh.GRAMMAR&&(s.grammar_checked=!0)}).catch(e=>{v(!1),console.log(e)})},children:(0,a.jsx)(i.Z.Item,{name:"note",children:(0,a.jsx)(Z.Z,{showCount:!0,style:{height:300,marginBottom:16}})})})})})}function M(e){var n,t;let{date:o,lesson:s,open:r,form:d,handleOk:u,handleCancel:c,handleEditSchedule:m,callBackOnSuccess:Z}=e,M=null!==(t=b.Z.get("token"))&&void 0!==t?t:"",[Y,S]=(0,l.useState)(!1),[C,A]=(0,l.useState)(!1),[R]=i.Z.useForm(),[V,w]=(0,l.useState)(_.Rh.GRAMMAR),O=i.Z.useWatch("vocabulary",d),P=e=>{w(e);let n=e===_.Rh.GRAMMAR?null==s?void 0:s.grammar_note:null==s?void 0:s.vocabulary_note;R.setFieldValue("note",n),A(!0)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{title:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{children:["Completed: ",null==o?void 0:o.format("DD/MM/YYYY")]}),(0,a.jsx)(p.Z,{title:"Edit schedule",children:(0,a.jsx)(j.Z,{style:{marginLeft:10,color:"#1677ff",cursor:"pointer"},onClick:m})})]}),open:r,onOk:u,okText:"Save",confirmLoading:Y,onCancel:c,children:(0,a.jsxs)(i.Z,{form:d,labelCol:{span:6},wrapperCol:{span:18},style:{maxWidth:600,minHeight:200},onFinish:e=>{S(!0),fetch(_.QP+"schedules",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+M,Accept:"application/json"},body:JSON.stringify({is_update:!0,date:null==s?void 0:s.date,number_word_completed:e.vocabulary,listening_checked:!!(null==e?void 0:e.listening),reading_checked:!!(null==e?void 0:e.reading)})}).then(n=>{S(!1),s.number_word_completed=e.vocabulary,s.listening_checked=!!(null==e?void 0:e.listening),s.reading_checked=!!(null==e?void 0:e.reading),n.ok&&Z()}).catch(e=>{S(!1),console.log(e)})},autoComplete:"off",children:[(0,a.jsx)(i.Z.Item,{label:"Time",children:null==s?void 0:null===(n=s.time_start)||void 0===n?void 0:n.substring(0,5)}),(0,a.jsxs)(i.Z.Item,{label:"Vocabulary",children:[(0,a.jsx)(i.Z.Item,{name:"vocabulary",noStyle:!0,rules:[{required:!0,message:"This field is required"}],children:(0,a.jsx)(g.Z,{placeholder:"Words",min:0,max:null==s?void 0:s.number_word})}),(0,a.jsxs)("span",{className:"ant-form-text",style:{marginLeft:8},children:["/ ",null==s?void 0:s.number_word," words"]}),(0,a.jsx)(f.ZP,{icon:(0,a.jsx)(y.Z,{}),title:"Note",onClick:()=>{P(_.Rh.VOCABULARY)}})]}),(0,a.jsx)(i.Z.Item,{wrapperCol:{offset:6,span:18},children:(0,a.jsx)(v.Z,{percent:Math.round(O/(null==s?void 0:s.number_word)*100)})}),(0,a.jsx)(i.Z.Item,{label:"Grammar",valuePropName:"checked",hidden:!(null==s?void 0:s.is_study_grammar),children:(0,a.jsx)(f.ZP,{icon:(0,a.jsx)(y.Z,{}),title:"Note",onClick:()=>{P(_.Rh.GRAMMAR)}})}),(0,a.jsx)(i.Z.Item,{name:"listening",label:"Listening",valuePropName:"checked",hidden:!(null==s?void 0:s.is_study_listening),children:(0,a.jsx)(x.Z,{children:"Done"})}),(0,a.jsx)(i.Z.Item,{name:"reading",label:"Reading",valuePropName:"checked",hidden:!(null==s?void 0:s.is_study_reading),children:(0,a.jsx)(x.Z,{children:"Done"})})]})}),(0,a.jsx)(k,{type:V,form:R,date:o,lesson:s,open:C,handleOk:()=>{R.validateFields().then(()=>{R.submit()}),A(!1)},handleCancel:()=>{A(!1)},callBackOnSuccess:()=>{}})]})}var Y=t(3769),S=t(1471),C=t(1423);function A(e){var n;let{date:t,form:o,open:s,handleOk:r,handleCancel:d,callBackOnSuccess:u}=e,c=null!==(n=b.Z.get("token"))&&void 0!==n?n:"",[p,f]=(0,l.useState)(!1);return(0,a.jsx)(h.Z,{title:"Schedule: ".concat(null==t?void 0:t.format("DD/MM/YYYY")),open:s,onOk:r,confirmLoading:p,onCancel:d,okText:"Submit",children:(0,a.jsxs)(i.Z,{form:o,labelCol:{span:6},wrapperCol:{span:18},style:{maxWidth:600},initialValues:{remember:!0},onFinish:e=>{var n,t;f(!0),fetch(_.QP+"schedules",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c,Accept:"application/json"},body:JSON.stringify({date:null==e?void 0:null===(n=e.date)||void 0===n?void 0:n.format("YYYY-MM-DD"),time_start:null==e?void 0:null===(t=e.time)||void 0===t?void 0:t.format("HH:mm"),number_word:null==e?void 0:e.vocabulary,is_study_grammar:null==e?void 0:e.grammar,is_study_listening:null==e?void 0:e.listening,is_study_reading:null==e?void 0:e.reading})}).then(e=>{f(!1),e.ok&&u()}).catch(e=>{f(!1),console.log(e)})},autoComplete:"off",children:[(0,a.jsx)(i.Z.Item,{name:"date",hidden:!0,children:(0,a.jsx)(Y.default,{})}),(0,a.jsx)(i.Z.Item,{label:"Time",name:"time",initialValue:m()().set("hour",21).set("minutes",0),children:(0,a.jsx)(S.Z,{format:"HH:mm",defaultValue:m()().set("hour",21).set("minutes",0),minuteStep:5,needConfirm:!1})}),(0,a.jsxs)(i.Z.Item,{label:"Vocabulary",required:!0,children:[(0,a.jsx)(i.Z.Item,{name:"vocabulary",noStyle:!0,rules:[{required:!0,message:"This field is required"}],children:(0,a.jsx)(g.Z,{placeholder:"Words",min:0,max:200,style:{width:136}})}),(0,a.jsx)("span",{className:"ant-form-text",style:{marginLeft:8}})]}),(0,a.jsx)(i.Z.Item,{label:"Grammar",name:"grammar",valuePropName:"checked",initialValue:!0,children:(0,a.jsx)(C.Z,{defaultValue:!0})}),(0,a.jsx)(i.Z.Item,{label:"Listening",name:"listening",valuePropName:"checked",initialValue:!0,children:(0,a.jsx)(C.Z,{defaultValue:!0})}),(0,a.jsx)(i.Z.Item,{label:"Reading",name:"reading",valuePropName:"checked",initialValue:!0,children:(0,a.jsx)(C.Z,{defaultValue:!0})})]})})}var R=t(783),V=t.n(R),w=t(1772),O=t(8825),P=t(669);function D(e){var n;let{date:t,form:o,open:s,handleOk:r,handleCancel:d,callBackOnSuccess:u}=e,c=null!==(n=b.Z.get("token"))&&void 0!==n?n:"",[p,v]=(0,l.useState)(!1);return(0,a.jsx)(h.Z,{title:"Schedule: ".concat(null==t?void 0:t.format("DD/MM/YYYY")),open:s,onOk:r,confirmLoading:p,onCancel:d,footer:[(0,a.jsx)(f.ZP,{onClick:d,children:"Cancel"},"back"),(0,a.jsx)(f.ZP,{type:"primary",loading:p,danger:!0,onClick:()=>{v(!0),fetch(_.QP+"schedules",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c,Accept:"application/json"},body:JSON.stringify({date:null==t?void 0:t.format("YYYY-MM-DD")})}).then(e=>{v(!1),e.ok&&u()}).catch(e=>{v(!1),console.log(e)})},children:"Delete"},"delete"),(0,a.jsx)(f.ZP,{type:"primary",loading:p,onClick:r,children:"Save"},"submit")],children:(0,a.jsxs)(i.Z,{form:o,labelCol:{span:6},wrapperCol:{span:18},style:{maxWidth:600},initialValues:{remember:!0},onFinish:e=>{var n,t;v(!0),fetch(_.QP+"schedules",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+c,Accept:"application/json"},body:JSON.stringify({is_update:!0,date:null==e?void 0:null===(n=e.date)||void 0===n?void 0:n.format("YYYY-MM-DD"),time_start:null==e?void 0:null===(t=e.time)||void 0===t?void 0:t.format("HH:mm"),number_word:null==e?void 0:e.vocabulary,is_study_grammar:null==e?void 0:e.grammar,is_study_listening:null==e?void 0:e.listening,is_study_reading:null==e?void 0:e.reading})}).then(e=>{v(!1),e.ok&&u()}).catch(e=>{v(!1),console.log(e)})},autoComplete:"off",children:[(0,a.jsx)(i.Z.Item,{name:"date",hidden:!0,children:(0,a.jsx)(Y.default,{})}),(0,a.jsx)(i.Z.Item,{label:"Time",name:"time",initialValue:m()().set("hour",21).set("minutes",0),children:(0,a.jsx)(S.Z,{format:"HH:mm",defaultValue:m()().set("hour",21).set("minutes",0),minuteStep:5,needConfirm:!1})}),(0,a.jsxs)(i.Z.Item,{label:"Vocabulary",required:!0,children:[(0,a.jsx)(i.Z.Item,{name:"vocabulary",noStyle:!0,rules:[{required:!0,message:"This field is required"}],children:(0,a.jsx)(g.Z,{placeholder:"Words",min:0,max:200,style:{width:136}})}),(0,a.jsx)("span",{className:"ant-form-text",style:{marginLeft:8}})]}),(0,a.jsx)(i.Z.Item,{label:"Grammar",name:"grammar",valuePropName:"checked",initialValue:!0,children:(0,a.jsx)(C.Z,{defaultValue:!0})}),(0,a.jsx)(i.Z.Item,{label:"Listening",name:"listening",valuePropName:"checked",initialValue:!0,children:(0,a.jsx)(C.Z,{defaultValue:!0})}),(0,a.jsx)(i.Z.Item,{label:"Reading",name:"reading",valuePropName:"checked",initialValue:!0,children:(0,a.jsx)(C.Z,{defaultValue:!0})})]})})}m().extend(V()),m().updateLocale("en",{weekStart:1});let I=[{title:O.LE,href:"/"},{title:O.Os}];function T(){var e;let[n,t]=(0,l.useState)(()=>m()()),[c,h]=(0,l.useState)(!0),[p,g]=(0,l.useState)([]),[f,v]=(0,l.useState)(),[x,j]=(0,l.useState)(!1),[y,Z]=(0,l.useState)(!1),[k,Y]=(0,l.useState)(!1),[S]=i.Z.useForm(),[C]=i.Z.useForm(),[R]=i.Z.useForm(),[V,T]=(0,l.useState)(!1),F=null!==(e=b.Z.get("token"))&&void 0!==e?e:"",N=e=>{if(0===p.length)return null;let n=null;return p.forEach(t=>{e.format("YYYY-MM-DD")===t.date&&(n=(0,a.jsxs)(o.Z,{gap:"small",vertical:!0,children:[(0,a.jsx)(s.Z,{message:t.number_word_completed+"/"+t.number_word,type:t.number_word_completed===t.number_word?"success":"info",showIcon:!0}),!!t.is_study_grammar&&(0,a.jsx)(s.Z,{message:"Grammar",type:t.grammar_checked?"success":"info",showIcon:!0}),!!t.is_study_listening&&(0,a.jsx)(s.Z,{message:"Listening",type:t.listening_checked?"success":"info",showIcon:!0}),!!t.is_study_reading&&(0,a.jsx)(s.Z,{message:"Reading",type:t.reading_checked?"success":"info",showIcon:!0})]}))}),n},L=async e=>{T(!0),g([]);let n=e.startOf("month"),t=e.endOf("month");try{let e=await fetch(_.QP+"schedules?start_date=".concat(n.format("YYYY-MM-DD"),"&end_date=").concat(t.format("YYYY-MM-DD")),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+F,Accept:"application/json"}}),a=await e.json();g(a.data.lessons)}catch(e){}T(!1)};return(0,l.useEffect)(()=>{c&&(h(!1),L(m()()))}),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(r.ZP,{theme:{components:{Modal:{colorBgMask:"rgba(0, 0, 0, 0)"},Alert:{defaultPadding:"0 5px"}}},children:[(0,a.jsx)(w.x,{items:I}),(0,a.jsx)(P.L,{children:(0,a.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[(0,a.jsx)(d.Z,{tip:"".concat(O.V_,"..."),spinning:V,children:(0,a.jsx)(u.Z,{value:n,onSelect:(e,n)=>{if(n.source===_.fc.DATE){t(e);let n=p.find(n=>n.date===e.format("YYYY-MM-DD"));if(n){v(n),R.setFieldValue("vocabulary",null==n?void 0:n.number_word_completed),R.setFieldValue("listening",null==n?void 0:n.listening_checked),R.setFieldValue("reading",null==n?void 0:n.reading_checked),Y(!0);return}j(!0)}},onPanelChange:e=>{t(e),L(e)},cellRender:(e,n)=>"date"===n.type?N(e):n.originNode})}),(0,a.jsx)(A,{date:n,form:S,open:x,handleOk:()=>{S.validateFields().then(()=>{S.setFieldValue("date",n),S.submit()})},handleCancel:()=>{j(!1)},callBackOnSuccess:()=>{L(n),j(!1)}}),(0,a.jsx)(D,{date:n,form:C,open:y,handleOk:()=>{C.validateFields().then(()=>{C.submit()})},handleCancel:()=>{Z(!1)},callBackOnSuccess:()=>{L(n),Z(!1)}}),(0,a.jsx)(M,{date:n,lesson:f,form:R,open:k,handleOk:()=>{R.validateFields().then(()=>{Y(!1),R.submit()})},handleCancel:()=>{Y(!1)},handleEditSchedule:()=>{C.setFieldValue("date",n),C.setFieldValue("time",m()(m()().format("YYYY-MM-DD ")+(null==f?void 0:f.time_start))),C.setFieldValue("vocabulary",null==f?void 0:f.number_word),C.setFieldValue("grammar",null==f?void 0:f.is_study_grammar),C.setFieldValue("listening",null==f?void 0:f.is_study_listening),C.setFieldValue("reading",null==f?void 0:f.is_study_reading),Y(!1),Z(!0)},callBackOnSuccess:()=>{g([...p]),Y(!1)}})]})})]})})}var F=()=>(0,a.jsx)(T,{})},1772:function(e,n,t){"use strict";t.d(n,{x:function(){return i}});var a=t(7437);t(2265);var l=t(9140);let i=e=>{let{items:n}=e;return(0,a.jsx)(l.Z,{style:{margin:"16px 0"},items:n})}},669:function(e,n,t){"use strict";t.d(n,{L:function(){return i}});var a=t(7437);t(2265);var l=t(5057);let i=e=>{let{children:n}=e,{token:{colorBgContainer:t,borderRadiusLG:i}}=l.Z.useToken();return(0,a.jsx)("div",{style:{background:t,minHeight:1e3,padding:24,borderRadius:i},children:n})}},1943:function(e,n,t){"use strict";t.d(n,{QP:function(){return i},Rh:function(){return l},fc:function(){return a}});let a={YEAR:"year",MONTH:"month",DATE:"date",CUSTOMIZE:"customize"},l={VOCABULARY:"vocabulary",GRAMMAR:"grammar"},i="http://api.tkunloveivy.com/api/"},2416:function(){},8825:function(e){"use strict";e.exports=JSON.parse('{"LE":"Home","Os":"Schedule","Ce":"Ivy","Mv":{"S":"T&T Company","i":"Created by the love of the Moon"},"x4":"Login","w7":"Sign out","Do":"Email","Bj":"Password","Pr":"Remember me","V_":"Loading"}')}},function(e){e.O(0,[284,421,522,28,416,327,701,971,23,744],function(){return e(e.s=7493)}),_N_E=e.O()}]);